<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link
            rel="stylesheet"
            href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
            integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
            crossorigin="anonymous">
        <script
            src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>
        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>
        <title>Bro Finder</title>
    </head>
    <body>

        <div class="container">
            <h1>Welcome to Bro Finder Survey!</h1>

            <a href="/home">
                <button class="btn btn-primary btn-lg">Home</button>
            </a>
            <hr>
            <h2>About You</h2>
            <h4>Name (required)</h4>
            <input id="name" class="form-control" required="" type="text">
            <h4>Link to photo (required)</h4>
            <input id="photo" class="form-control" required="" type="text">
            <hr>
            <h5>1. Your mind is always buzzing with unexplored ideas and plans.</h5>
            <select id="q1">
                <option ></option>
                <option value"1">1 (Strongly Disagree)</option>
                <option value"2">2</option>
                <option value"3">3</option>
                <option value"4">4</option>
                <option value"5">5(Strongly Agree)</option>
            </select>
            <hr>
            <h5>2. Generally speaking, you rely more on your experience than your imagination.</h5>
            <select id="q2">
                    <option ></option>
                    <option value"1">1 (Strongly Disagree)</option>
                    <option value"2">2</option>
                    <option value"3">3</option>
                    <option value"4">4</option>
                    <option value"5">5(Strongly Agree)</option>
            </select>
            <hr>
            <h5>3. You find it easy to stay relaxed and focused even when there is some
                pressure.</h5>
                <select id="q3">
                  <option ></option>
                    <option value"1">1 (Strongly Disagree)</option>
                    <option value"2">2</option>
                    <option value"3">3</option>
                    <option value"4">4</option>
                    <option value"5">5(Strongly Agree)</option>
            </select>
            <hr>
            <h5>4. You rarely do something just out of sheer curiosity.</h5>
            <select id="q4">
                  <option ></option>
                    <option value"1">1 (Strongly Disagree)</option>
                    <option value"2">2</option>
                    <option value"3">3</option>
                    <option value"4">4</option>
                    <option value"5">5(Strongly Agree)</option>
            </select>
            <hr>
            <h5>5. People can rarely upset you.</h5>
            <select id="q5">
                  <option ></option>
                    <option value"1">1 (Strongly Disagree)</option>
                    <option value"2">2</option>
                    <option value"3">3</option>
                    <option value"4">4</option>
                    <option value"5">5(Strongly Agree)</option>
            </select>
            <hr>
            <h5>6. It is often difficult for you to relate to other people’s feelings.</h5>
            <select id="q6">
                  <option ></option>
                    <option value"1">1 (Strongly Disagree)</option>
                    <option value"2">2</option>
                    <option value"3">3</option>
                    <option value"4">4</option>
                    <option value"5">5(Strongly Agree)</option>
            </select>
            <hr>
            <h5>7. In a discussion, truth should be more important than people’s sensitivities.</h5>
            <select id="q7">
                  <option ></option>
                    <option value"1">1 (Strongly Disagree)</option>
                    <option value"2">2</option>
                    <option value"3">3</option>
                    <option value"4">4</option>
                    <option value"5">5(Strongly Agree)</option>
            </select>
            <hr>
            <h5>8. You rarely get carried away by fantasies and ideas.</h5>
            <select id="q8">
                  <option ></option>
                    <option value"1">1 (Strongly Disagree)</option>
                    <option value"2">2</option>
                    <option value"3">3</option>
                    <option value"4">4</option>
                    <option value"5">5(Strongly Agree)</option>
            </select>
            <hr>
            <h5>9. You think that everyone’s views should be respected regardless of whether
                they are supported by facts or not.</h5>
                <select id="q9">
                  <option ></option>
                    <option value"1">1 (Strongly Disagree)</option>
                    <option value"2">2</option>
                    <option value"3">3</option>
                    <option value"4">4</option>
                    <option value"5">5(Strongly Agree)</option>
            </select>
            <hr>
            <h5>10. You feel more energetic after spending time with a group of people.</h5>
            <select id="q10">
                    <option ></option>
                    <option value"1">1 (Strongly Disagree)</option>
                    <option value"2">2</option>
                    <option value"3">3</option>
                    <option value"4">4</option>
                    <option value"5">5(Strongly Agree)</option>
            </select>
            <hr>
            <br>
            <button class="btn btn-primary btn-lg" id="submit">
                Submit
            </button>
            <hr>
            <footer>
                <div>
                    <a href="http://localhost:8080/api/friends">Friends API</a>
                    |
                    <a href="https://github.com/WaleedHamza/Friend-Finder">GitHub Repo</a>
                </div>
            </footer>

        </div>

        <div id="resultModal" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h2 class="modal-title">
                            <strong>Best Match</strong>
                        </h2>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <h2 id="matchName"></h2>
                            <img id="matchImg" class="img-responsive" src="" alt="">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-deault" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
            </div>
<script>
    $("#submit").on('click', function () {
        console.log('submit clicked'); 
        //User input validation
        function valid() {
            var isValid = true;
            $(".form-control").each(function () {
                var input = $(this).val()
                if (input === '' || typeof input == 'number') 
                    isValid = false;
                }
            )
            return isValid;
        }
        valid();

        if (valid() == true) {
            var userData = {
                name: $('#name').val().trim(),
                photo: $('#photo').val().trim(),
                scores: [
                    $('#q1').val(),
                    $('#q2').val(),
                    $('#q3').val(),
                    $('#q4').val(),
                    $('#q5').val(),
                    $('#q6').val(),
                    $('#q7').val(),
                    $('#q8').val(),
                    $('#q9').val(),
                    $('#q10').val()
                ]
            } //end of userData
            
            //Using AJAX to post data
            $.post('api/friends', userData)
                .then((data) => {
                    $('#matchName').text(data.name);
                    $('#matchImg').attr('src', data.photo);
                    $('#resultModal').modal('toggle');
                })
        } else {
            alert("Please fill out all required fields")
        }
        return false;
    });
</script>
</body>
</html>